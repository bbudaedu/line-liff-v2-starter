# 需求文件

## 介紹

彰化供佛齋僧活動報名系統是一個基於 LINE LIFF 的 mini-app，旨在簡化佛教活動的報名流程。系統將整合 LINE 官方帳號與 Pretix 票務系統，讓法師和志工能夠輕鬆透過 LINE 介面完成活動報名，包含個人資料填寫和交通車登記，最終將資料同步至 Pretix 進行統一管理。

## 需求

### 需求 1 - 使用者身份管理

**使用者故事：** 作為系統使用者，我希望能夠選擇我的身份類型（法師或志工），以便系統提供適合的報名選項。

#### 驗收標準

1. 當使用者首次進入系統時，系統應該顯示身份選擇介面
2. 當使用者選擇「法師」身份時，系統應該記錄此身份並提供法師專屬的報名選項
3. 當使用者選擇「志工」身份時，系統應該記錄此身份並提供志工專屬的報名選項
4. 如果使用者已經選擇過身份，系統應該自動載入之前的身份設定

### 需求 2 - 活動報名功能

**使用者故事：** 作為法師或志工，我希望能夠瀏覽可報名的活動並進行報名，以便參與供佛齋僧活動。

#### 驗收標準

1. 當使用者進入報名頁面時，系統應該顯示所有可報名的活動清單
2. 當使用者點選特定活動時，系統應該顯示活動詳細資訊
3. 當使用者確認報名時，系統應該引導至資料填寫頁面
4. 如果活動已額滿，系統應該顯示「已額滿」狀態並禁止報名

### 需求 3 - 個人資料填寫

**使用者故事：** 作為報名者，我希望能夠填寫必要的個人資料，以便完成活動報名程序。

#### 驗收標準

1. 當使用者進入資料填寫頁面時，系統應該顯示適合其身份的表單欄位
2. 當法師填寫資料時，系統應該包含：姓名、聯絡電話、寺院名稱、特殊需求等欄位
3. 當志工填寫資料時，系統應該包含：姓名、聯絡電話、緊急聯絡人、特殊需求等欄位
4. 當使用者提交不完整資料時，系統應該顯示錯誤訊息並標示必填欄位
5. 當使用者成功提交資料時，系統應該顯示確認訊息

### 需求 4 - 交通車登記

**使用者故事：** 作為報名者，我希望能夠登記交通車需求，以便安排往返活動地點的交通。

#### 驗收標準

1. 當使用者在報名流程中時，系統應該提供交通車登記選項
2. 當使用者選擇需要交通車時，系統應該顯示可選擇的上車地點清單
3. 當使用者選擇上車地點時，系統應該顯示該地點的詳細資訊（時間、地址）
4. 當交通車座位已滿時，系統應該顯示「已額滿」並提供其他地點選項
5. 當使用者確認交通車登記時，系統應該將此資訊包含在報名資料中

### 需求 5 - Pretix 系統整合

**使用者故事：** 作為系統管理員，我希望報名資料能自動同步至 Pretix 系統，以便統一管理所有報名資訊。

#### 驗收標準

1. 當使用者完成報名時，系統應該自動將資料傳送至 Pretix API
2. 當 Pretix 回傳成功確認時，系統應該顯示報名成功訊息並提供訂單編號
3. 當 Pretix 回傳錯誤時，系統應該顯示錯誤訊息並允許使用者重新嘗試
4. 如果網路連線失敗，系統應該暫存資料並提供重新送出選項

### 需求 6 - LINE 官方帳號整合

**使用者故事：** 作為使用者，我希望能透過 LINE 官方帳號輕鬆存取報名系統，以便快速完成報名程序。

#### 驗收標準

1. 當使用者點擊 LINE 官方帳號的報名連結時，系統應該開啟 LIFF 應用程式
2. 當系統載入時，應該自動取得使用者的 LINE 基本資料（姓名、頭像）
3. 當使用者完成報名時，系統應該透過 LINE 發送確認訊息
4. 如果使用者未加入官方帳號好友，系統應該引導加入好友

### 需求 7 - 響應式 UI 設計

**使用者故事：** 作為手機使用者，我希望介面能夠適應不同螢幕尺寸並提供良好的使用體驗，以便在手機上順暢操作。

#### 驗收標準

1. 當系統在手機上顯示時，所有元素應該適當縮放並保持可讀性
2. 當使用者需要閱讀文字時，系統應該提供適當的字體大小（至少 16px）
3. 當使用者點擊按鈕時，按鈕應該有足夠的點擊區域（至少 44px）
4. 當系統載入時，應該顯示載入動畫以改善使用者體驗
5. 當發生錯誤時，系統應該顯示友善的錯誤訊息

### 需求 8 - 報名狀態查詢

**使用者故事：** 作為已報名的使用者，我希望能夠查詢我的報名狀態和詳細資訊，以便確認報名成功並了解活動安排。

#### 驗收標準

1. 當使用者進入系統時，如果已有報名記錄，系統應該顯示「查詢報名」選項
2. 當使用者查詢報名狀態時，系統應該顯示報名的活動資訊、個人資料和交通安排
3. 當使用者需要修改資料時，系統應該提供編輯功能（在允許的時間範圍內）
4. 當活動時間接近時，系統應該顯示重要提醒資訊（集合時間、地點等）